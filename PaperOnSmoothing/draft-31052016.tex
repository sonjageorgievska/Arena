\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{fullpage}
\usepackage{verbatim}
\begin{document}

\title{Crowd density estimation from Wi-Fi positioning data in the Amsterdam Arena}
\maketitle

\begin{abstract}
\begin{comment}
We present the Amsterdam Arena project, which involves observing and managing crowd behaviour, using the Amsterdam Arena stadium as a living laboratory. The main scientific question we explore is how to detect anomalous behaviour in large crowds in real time. The main purpose is to be able to predict a possible crowd disaster and identify means to prevent it from happening. 
Human crowds are complex systems, and predicting or controlling their behaviour is challenging. Our approach involves three phases, firstly data collection from Wi-Fi and Bluetooth sensors in the stadium, secondly data analytics, and finally we aim to use simulation to make forecasts about the crowd dynamics. 
Here we present initial results on the data analytics and show how we can extract density maps from Wi-Fi positioning data. The technology we deploy is based on the Wi-Fi signals from smart phones. We use the existing network of Wi-Fi access points in the stadium, and capture probe signals from smart phones, which are processed and anonymised in alignment with privacy concerns. The positions of smart phones are reconstructed using received signal strengths and methods similar to trilateration. The data provides us with real-time information on spatial distributions of crowd density, which is an essential indicator of the criticality of crowd conditions. To visualise the spatiotemporal behaviour of crowd density in real-time we dynamically generate heat maps along a moving time interval. The heat maps are generated through the statistical modelling of the positioning data. The generation of dynamic heat maps allows us to detect and locate hot-spots of density where crowd conditions reach critical values that could possibly lead to a disaster.
\end{abstract}
\end{comment}
\section{Introduction}


***********************************From Sonja. nb: the text will be polished in the final phases, first I care only about putting all ideas on paper***************

Crowd disasters have taken many human lives. The Love Parade disaster (Duisburg, 2010), the Ellis Park Stadium disaster (Johannesburg, 2001), the PhilSports Stadium stampede (Manila, 2006) are just a few recent examples. One of the reasons that disasters happen is a "lack of overview of everybody" [cite paper on love parade EPJ DS], that is, a lack of macroscopic overview of the crowd. Critical crowd density (cite paper 8/m2, find it in e-mails)) is a contributing factor to crowd disasters; yet, it is still challenging to determine timely when it occurs, so that a disaster can be prevented before it happens, by e.g. navigating the rest of the crowd away from the congestion. 

In our work we are interested in estimating crowd density during concerts in indoor spaces. A lot of research on estimating crowd density has been done using video processing from security cameras (cite papers (1), (2), (3) from proposal?). However, this approach does not apply in our case, because 1)  it is difficult to obtain macroscopic overview ; 2) the lighting conditions during concert hours are not sufficient for video-based crowd analysis; and 3) the error of video-based density estimation increases with the increase of the actual crowd density.  

In our approach, we combat the three above mentioned issues by exploiting the ubiquity of smart phones, as in ((4) (5), (6) from proposal?). Our living laboratory is the Amsterdam Arena(citation). First, we are estimating in real-time anonymously the positions of the visitors via the signal strengths of their phones to the  Wi-Fi routers in the venue. This technique has been presented in (cite Jan's slides), and is similar to trilateration. However, due to signal interference, irregular internet packet rates and systematic errors, this methodology is imprecise as well.  Thus, second, we apply the law of the large numbers to obtain an estimation of the crowd density, also in real-time. With the first step, we are dealing with issues 1) and 2) mentioned above. With the second step, which is the main contribution of this paper, we are handling issue 3) -  that is, with our method the precision of estimation actually increases as the crowd density increases. 

n.b. in related work section put all that use wi-fi tracking, for those that use GPS tracking only mention that this does not work in indoor spaces and that it requires participation. Not necessary to put work on video tracking in related work - it is already mentioned in intro. Mention also bluetooth tracking, but bluetooth is not so ubiquitous and our principles apply also if bluetooth was used (right?) 

Finally, none of the mentioned work uses our approach of modeling the position of an individual as a probability distribution; our method is designed to attack the problem of having a dense crowd; we are not interested in precise estimations for freely moving crowds; rather, we are interested in obtaining precise estimation when the  concert crowds is dense and static due to this. blah blah (sonja: explain better)

************************************end from Sonja
\begin{comment}
\begin{itemize}

\item Background\\

Human crowds are complex systems, and predicting or controlling their behavior is challenging. Our approach involves three phases, firstly data collection from Wi-Fi and Bluetooth sensors in the stadium, secondly data analytics, and finally we aim to use simulation to make forecasts about the crowd dynamics. 

In this paper we present initial results on the data analytics and show how we can extract density maps from Wi-Fi positioning data. 

\item Aims\\

The main purpose is to be able to predict a possible crowd disaster and identify means to prevent it from happening. 

\end{itemize}
\end{comment}

\section{Positioning of visitors using Wi-Fi sensors and smart phones}

\begin{comment}
The technology we deploy is based on the Wi-Fi signals from smart phones. We use the existing network of Wi-Fi access points in the stadium, and capture probe signals from smart phones, which are processed and anonymised in alignment with privacy concerns. The positions of smart phones are reconstructed using received signal strengths and methods similar to trilateration. 


\begin{itemize}
\item How are the uncertainties (errors) generated and what do they mean?
\end{itemize}
\end{comment}
\section{From positioning to estimation of density}

\subsection{Issues with positioning (title to reconsider)}

\subsection{Addressing the issues: real-time crowd density estimation}

\begin{comment}
To visualise the spatiotemporal behaviour of crowd density in real-time we dynamically generate heat maps along a moving time interval. The heat maps are generated through the statistical modeling of the positioning data. The generation of dynamic heat maps allows us to detect and locate hot-spots of density where crowd conditions reach critical values that could possibly lead to a disaster.
\end{comment}

\begin{itemize}
\item The method we use is similar to Kernel Density Estimation, but what we are doing is not actual smoothing (?).
\end{itemize}

To construct two-dimensional probability density functions we apply non-parametric density estimation.
To make density histograms we consider a two-dimensional binned region of space, and count the number of positions that fall into each bin. For each bin location $X$, in the time interval $t$, we apply the kernel density estimation (KDE) method \cite{scott}\cite{silverman} given by

\begin{equation}
\hat{d}(X,t)=\frac{1}{N }\sum_{i=1}^{N} K_{h_{x}} (x-x_{i}) K_{h_{y}} (y-y_{i})
\label{kde}
\end{equation}

where $K_{h_{u}}$ is the kernel function $K_{h}(u)=K(u/h)/h$, $h$ is the smoothing parameter, or bandwidth, and $N$ is the number of data points (positions) in the time interval $t$.

The bandwith parameter $h$ is crucial for the accuracy of the density estimate. 
Several theoretical approaches are possible.
Here we base our choice of kernel bandwidth values $h$ on the error values $(\sigma_{x},\sigma_{y})$ provided by the positioning methods (see Section ).

\subsection{Real-time data analysis}

To process positioning data in real-time during events, we consider data within a specific moving time window.
To take in account that visitors are moving, we subdivide the time window in multiple sub-windows and attach more weight to measurements in later sub-windows. The weighting scheme is given by

\begin{equation}
\hat{d}(X,t)=\frac{w_{1}\hat{f}(X,t_{1})+w_{2}\hat{f}(X,t_{2})+...+w_{m}\hat{f}(X,t_{m})}{w_{1}N_{1}+w_{2}N_{2}+...+w_{m}N_{m}}
\end{equation}

\noindent where $\hat{f}(X,t)$ is the non-normalized sum of smoothed counts ($N\times\hat{d}(X,t)$) in Equation \ref{kde}, $w_{k}$ is the weight value given to sub-window $k$, and $m$ is the number of sub-windows.

\subsection{Validation}

\begin{itemize}
\item Simulation?\\
Do we include simulation of the positioning process, i.e. the toy Monte Carlo simulation, or do we generate fitted positions with error values, and only test the density estimation methods?
\end{itemize}

\section{Related work}
Measuring crowd density by tracking the location of smart phones has been done in:

(Wirz \textit{et al.} 2012) \cite{wirz:1} and (Wirz \textit{et al.} 2013) \cite{wirz:2} use GPS data of people that use an App.\\
(Weppner \textit{et al.} 2014) \cite{weppner:1} use Bluetooth, however without positioning / tracking.\\
(Schauer \textit{et al.} 2014) \cite{schauer:1} use Wi-Fi, without positioning / tracking.\\

Wirz \textit{et al.} (2012) \cite{wirz:1} infer crowd density from GPS location traces of people who use an App during the 2011 Lord Mayor Show in London. They visualize the data in real-time, and generate heat maps (dynamically) using the kernel density estimation (KDE) method. In (Wirz \textit{et al.} 2013) \cite{wirz:2} the methodology is presented more elaborately, using a real-world data set collected during the same festival. The relation between the number of App users and the crowd density is calibrated (using linear regression), which forms the basis of their participatory sensing method. 
The accuracy of the smoothing method is assessed using ground truth crowd density information obtained from video footage recorded by CCTV cameras. 
The influence of the kernel radius on the correlation between the actual density and the density of App is analysed.

The Gaussian weight function is introduced in Helbing \textit{et al.} (2007) \cite{helbing:1} to estimate local densities in an area captured by video cameras during the Hajj in Mina/Makkah in 1426H on January 12, 2006.



\section{Conclusion}



\bibliography{references}
\bibliographystyle{plain}

\end{document}